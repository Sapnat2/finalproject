{"ast":null,"code":"import _classCallCheck from \"c:\\\\Dev\\\\Final_new_project\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"c:\\\\Dev\\\\Final_new_project\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"c:\\\\Dev\\\\Final_new_project\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"c:\\\\Dev\\\\Final_new_project\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"c:\\\\Dev\\\\Final_new_project\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"c:\\\\Dev\\\\Final_new_project\\\\client\\\\src\\\\components\\\\comments.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport FirstPost from './FirstPost';\nimport \"./style.css\";\n\nvar Comments =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Comments, _Component);\n\n  function Comments() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Comments);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Comments)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      story: \"\",\n      author: \"\",\n      comment: \"\",\n      comments: [],\n      loggedIn: false,\n      username: null\n    };\n\n    _this.getBook = function () {\n      axios.get(\"/api/story/\" + _this.props.match.params.id).then(function (res) {\n        console.log(res.data);\n\n        _this.setState({\n          story: res.data.description,\n          author: res.data.author\n        });\n      });\n    };\n\n    _this.getComments = function () {\n      axios.get(\"/api/comment/\" + _this.props.match.params.id).then(function (res) {\n        console.log(res.data);\n\n        _this.setState({\n          comments: res.data\n        });\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Comments, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getUser();\n      this.getBook();\n      this.getComments();\n    }\n  }, {\n    key: \"getUser\",\n    value: function getUser() {\n      var _this2 = this;\n\n      axios.get('/user/').then(function (response) {\n        console.log('Get user response: ');\n        console.log(response.data);\n\n        if (response.data.user) {\n          console.log('Get User: There is a user saved in the server session: ');\n\n          _this2.setState({\n            loggedIn: true,\n            username: response.data.user.username\n          });\n        } else {\n          console.log('Get user: no user');\n\n          _this2.setState({\n            loggedIn: false,\n            username: null\n          });\n        }\n      });\n    }\n  }, {\n    key: \"handleSubmit\",\n    value: function handleSubmit(event) {\n      event.preventDefault();\n      console.log(\"hi sarah\");\n      var post = {\n        author: this.state.username,\n        body: this.state.comment,\n        postId: this.props.match.params.id\n      };\n      axios.post(\"/submit/\" + this.props.match.params.id, post).then(function (res) {\n        console.log(res.data);\n      });\n      this.setState({\n        comment: \"\"\n      });\n      this.getComments();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var loggedIn = this.state.loggedIn;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(FirstPost, {\n        description: this.state.story,\n        author: this.state.author,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }), this.state.comments.map(function (comment) {\n        return React.createElement(FirstPost, {\n          description: comment.body,\n          author: comment.author,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84\n          },\n          __self: this\n        });\n      }), loggedIn ? React.createElement(\"form\", {\n        className: \"commentForm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-12 mt-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, React.createElement(\"textarea\", {\n        className: \"form-input\",\n        type: \"text\",\n        id: \"commentBox\",\n        name: \"description\",\n        rows: \"10\",\n        cols: \"150\",\n        value: this.state.comment,\n        onChange: function onChange(event) {\n          return _this3.setState({\n            comment: event.target.value\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      })), React.createElement(\"button\", {\n        className: \"btn btn-primary col-1\",\n        id: \"addCommentButton\",\n        onClick: function onClick(event) {\n          return _this3.handleSubmit(event);\n        },\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, \"Submit\")) : React.createElement(Link, {\n        to: \"/login\",\n        className: \"btn btn-primary\",\n        id: \"logintoadd\",\n        role: \"button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, \"Login to add to this story\"));\n    }\n  }]);\n\n  return Comments;\n}(Component);\n\nexport default Comments;","map":{"version":3,"sources":["c:/Dev/Final_new_project/client/src/components/comments.js"],"names":["React","Component","axios","Link","FirstPost","Comments","state","story","author","comment","comments","loggedIn","username","getBook","get","props","match","params","id","then","res","console","log","data","setState","description","getComments","getUser","response","user","event","preventDefault","post","body","postId","map","target","value","handleSubmit"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios'\nimport { Link } from 'react-router-dom'\nimport FirstPost from './FirstPost'\nimport \"./style.css\"\n\nclass Comments extends Component {\n\n    state = {\n        story: \"\",\n        author: \"\",\n        comment: \"\",\n        comments: [],\n        loggedIn: false,\n        username: null\n    }\n\n    componentDidMount() {\n        this.getUser()\n        this.getBook()\n        this.getComments()\n    }\n\n    getUser() {\n        axios.get('/user/').then(response => {\n            console.log('Get user response: ')\n            console.log(response.data)\n            if (response.data.user) {\n                console.log('Get User: There is a user saved in the server session: ')\n\n                this.setState({\n                    loggedIn: true,\n                    username: response.data.user.username\n                })\n            } else {\n                console.log('Get user: no user');\n                this.setState({\n                    loggedIn: false,\n                    username: null\n                })\n            }\n        })\n    }\n\n    getBook = () => {\n        axios.get(\"/api/story/\" + this.props.match.params.id).then(res => {\n            console.log(res.data)\n            this.setState({ story: res.data.description, author: res.data.author })\n        })\n    }\n\n    getComments = () => {\n        axios.get(\"/api/comment/\" + this.props.match.params.id).then(res => {\n            console.log(res.data)\n            this.setState({ comments: res.data })\n        })\n    }\n\n    handleSubmit(event) {\n        event.preventDefault()\n        console.log(\"hi sarah\");\n\n        const post = { author: this.state.username, body: this.state.comment, postId: this.props.match.params.id }\n\n        axios.post(\"/submit/\" + this.props.match.params.id, post).then(res => {\n            console.log(res.data)\n        })\n\n        this.setState({\n            comment: \"\"\n        })\n        this.getComments()\n    }\n\n    render() {\n        const loggedIn = this.state.loggedIn;\n        return (\n            <div>\n                <FirstPost\n                    description={this.state.story}\n                    author={this.state.author}\n                />\n                {this.state.comments.map(comment => (\n                    <FirstPost\n                        description={comment.body}\n                        author={comment.author}\n                    />\n\n                ))}\n                {loggedIn ? (\n                    <form className=\"commentForm\">\n                        <div className=\"col-12 mt-5\">\n                            <textarea className=\"form-input\"\n                                type=\"text\"\n                                id=\"commentBox\"\n                                name=\"description\"\n                                rows=\"10\"\n                                cols=\"150\"\n                                value={this.state.comment}\n                                onChange={(event) => this.setState({ comment: event.target.value })}\n                            />\n                        </div>\n                        <button\n                            className=\"btn btn-primary col-1\"\n                            id = \"addCommentButton\"\n\n                            onClick={(event) => this.handleSubmit(event)}\n                            type=\"submit\">Submit</button>\n                    </form>\n                ) : (\n                        <Link to={\"/login\"} className=\"btn btn-primary\" id=\"logintoadd\" role=\"button\">Login to add to this story</Link>\n                    )}\n            </div>\n        )\n    }\n}\n\nexport default Comments;"]},"metadata":{},"sourceType":"module"}